<!doctype html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
		<meta name="format-detection" content="telephone=no, address=no, email=no" />
		<meta name="keywords" content="자동차보험, 다이렉트자동차보험, 현대해상다이렉트, 현대해상자동차보험, 현대해상다이렉트자동차보험, 현대해상여행자보험" />
		<meta name="description" content="현대해상 다이렉트 공식사이트, 자동차보험/운전자보험/여행자보험/유학보험 등 오프라인대비 저렴" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="현대해상 다이렉트" />
		<meta property="og:description" content="다양한 할인특약, 보장은 든든하게!" />
		<meta property="og:url" content="https://direct.hi.co.kr" />
		<meta name="facebook-domain-verification" content="qri8envtcg4g7qq47osuqhiz1g5ozx" />
		<meta name="naver-site-verification" content="4735425b479dd8c97323bb3cdc413fd4a6deb4e0" />
		<meta name="google-site-verification" content="Irhtk0HjnblJSRzK8_LdpTjAZjNpxpN_Kz0iAAMGGww" />
		<link rel="shortcut icon" type="image/x-icon" href="../../../images/favicon.ico" />
		<link rel="shortcut icon" type="image/x-icon" href="../../../images/favicon.ico" />
		<link rel="apple-touch-icon" sizes="57x57" href="../../../images/favicon/apple-icon-57x57.png" />
		<link rel="apple-touch-icon" sizes="60x60" href="../../../images/favicon/apple-icon-60x60.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="../../../images/favicon/apple-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="76x76" href="../../../images/favicon/apple-icon-76x76.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="../../../images/favicon/apple-icon-114x114.png" />
		<link rel="apple-touch-icon" sizes="120x120" href="../../../images/favicon/apple-icon-120x120.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="../../../images/favicon/apple-icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="../../../images/favicon/apple-icon-152x152.png" />
		<link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon/apple-icon-180x180.png" />
		<link rel="icon" type="image/png" sizes="192x192" href="../../../images/favicon/android-icon-192x192.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon/favicon-16x16.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="96x96" href="../../../images/favicon/favicon-96x96.png" />
		<script type="text/javascript" src="../../../js/libs/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="../../../js/libs/jquery-ui-1.12.1.min.js"></script>
		<script type="text/javascript" src="../../../js/libs/swiper-bundle.min.js"></script>
		<script type="text/javascript" src="../../../js/libs/splide.min.js"></script>
		<script type="text/javascript" src="../../../js/common.js"></script>
		<script type="text/javascript" src="../../../js/libs/lottie-player.js"></script>
		<script type="text/javascript" src="../../../js/popup.js"></script>
		<script type="text/javascript" src="../../../js/dragging.js"></script>
		<script type="text/javascript" src="../../../js/stepper.js"></script>
		<script type="text/javascript" src="../../../js/scroll_option.js"></script>
		<link rel="stylesheet" href="../../../css/libs/swiper-bundle.min.css" />
		<link rel="stylesheet" href="../../../css/libs/splide.min.css" />
		<title>현대해상 다이렉트</title>

		<link rel="stylesheet" href="guide.css" />
		<link rel="stylesheet" href="../../../css/reset.css" />
		<link rel="stylesheet" href="../../../css/common.css" />
		<link rel="stylesheet" href="../../../css/contents.css" />
		<link rel="stylesheet" href="../../../css/popup.css" />
	</head>
	<body class="guide_body">
		<style>
			.progress_bar + .progress_bar {
				margin-top: 2rem;
			}
		</style>

		<div class="guide_h1">Progress</div>
		<div class="guide_h4">횟수</div>

		<div class="progress_bar progress_bar_ty1 progress_bar_ty1_count" role="img" tabindex="0">
			<div class="progress_bar_per_cover">
				<div class="progress_bar_per">
					<div class="per_bar">
						<span class="per_bar_dp dp_ic1" data-pbc="3">
							<span class="text">3회</span>
						</span>
					</div>
				</div>
			</div>
			<div class="progress_bar_bottom">
				<span class="pbb_start" data-pbcs="0">0회</span>
				<span class="pbb_end" data-pbce="180">180회</span>
			</div>
		</div>

		<div class="progress_bar progress_bar_ty1 progress_bar_ty1_count" role="img" tabindex="0">
			<div class="progress_bar_per_cover">
				<div class="progress_bar_per">
					<div class="per_bar">
						<span class="per_bar_dp dp_ic1" data-pbc="63">
							<span class="text">63회</span>
						</span>
					</div>
				</div>
			</div>
			<div class="progress_bar_bottom">
				<span class="pbb_start" data-pbcs="0">0회</span>
				<span class="pbb_end" data-pbce="180">180회</span>
			</div>
		</div>

		<div class="progress_bar progress_bar_ty1 progress_bar_ty1_count" role="img" tabindex="0">
			<div class="progress_bar_per_cover">
				<div class="progress_bar_per">
					<div class="per_bar">
						<span class="per_bar_dp dp_ic1" data-pbc="165">
							<span class="text">165회</span>
						</span>
					</div>
				</div>
			</div>
			<div class="progress_bar_bottom">
				<span class="pbb_start" data-pbcs="0">0회</span>
				<span class="pbb_end" data-pbce="180">180회</span>
			</div>
		</div>

		<div class="guide_h4">날짜</div>
		<div class="progress_bar progress_bar_ty1 progress_bar_ty1_date" role="img" tabindex="0">
			<div class="progress_bar_per_cover">
				<div class="progress_bar_per">
					<div class="per_bar">
						<span class="per_bar_dp dp_ic2">
							<span class="text"></span>
						</span>
					</div>
				</div>
			</div>
			<div class="progress_bar_bottom">
				<span class="pbb_start" data-pbcsdate="2025.04.30">2025.04.30</span>
				<span class="pbb_end" data-pbcedate="2026.01.12">2026.01.12</span>
			</div>
		</div>

		<div class="progress_bar progress_bar_ty1 progress_bar_ty1_date" role="img" tabindex="0">
			<div class="progress_bar_per_cover">
				<div class="progress_bar_per">
					<div class="per_bar">
						<span class="per_bar_dp dp_ic2">
							<span class="text"></span>
						</span>
					</div>
				</div>
			</div>
			<div class="progress_bar_bottom">
				<span class="pbb_start" data-pbcsdate="2024.01.13">2024.01.13</span>
				<span class="pbb_end" data-pbcedate="2028.01.12">2028.01.12</span>
			</div>
		</div>

		<div class="progress_bar progress_bar_ty1 progress_bar_ty1_date" role="img" tabindex="0">
			<div class="progress_bar_per_cover">
				<div class="progress_bar_per">
					<div class="per_bar">
						<span class="per_bar_dp dp_ic2">
							<span class="text"></span>
						</span>
					</div>
				</div>
			</div>
			<div class="progress_bar_bottom">
				<span class="pbb_start" data-pbcsdate="2024.01.13">2024.01.13</span>
				<span class="pbb_end" data-pbcedate="2025.04.30">2025.04.30</span>
			</div>
		</div>

		<script>
			$(function () {
				function updateProgressBarPosition($progressBar) {
					// 접근성 관련 문구 생성 후 삽입
					var current = $progressBar.find("[data-pbc]").data("pbc");
					var total = $progressBar.find("[data-pbce]").data("pbce");

					$progressBar.attr("aria-label", "전체 " + total + "회 중 " + current + "회 납입");

					// 전체 넓이
					var $progressBarPer = $progressBar.find(".progress_bar_per");
					var progressBarPerWidth = $progressBarPer.outerWidth(); // 기준 넓이(px)

					// 퍼센트 계산 (소수점 없이)
					var percent = Math.floor((current / total) * 100); // 현재 진행률(%)

					var pixelWidth = Math.floor((percent / 100) * progressBarPerWidth); // 진행률 px 환산

					var $perBar = $progressBar.find(".per_bar");
					var $perBarDp = $perBar.find(".per_bar_dp");
					var perBarDpWidth = $perBarDp.outerWidth();

					// console.log('움직이는 컨텐츠 넓이 : ', perBarDpWidth);

					// 초기 클래스 제거
					$perBar.removeClass("pos");
					$perBarDp.removeClass("poe");

					// 앞에 고정하기
					if (pixelWidth < perBarDpWidth / 2) {
						$perBar.addClass("pos");
					} else {
						$perBar.removeClass("pos");
					}

					// 끝으로 보내기
					if (progressBarPerWidth - pixelWidth < perBarDpWidth / 2) {
						$perBar.addClass("poe");
					} else {
						$perBar.removeClass("poe");
					}

					// per_bar 너비 설정
					setTimeout(function () {
						$perBar.addClass("active").css("width", percent + "%");
					}, 100);
				}

				// 여러 개의 .progress_bar_ty1_count 대해 반복 처리
				$(".progress_bar_ty1_count").each(function () {
					var $this = $(this); // 각 progress_bar_ty1을 $this로 참조

					// 윈도우 로드 시 updateProgressBarPosition 함수 호출
					$(window).on("load", function () {
						updateProgressBarPosition($this);
					});

					// 리사이즈 시에도 적용
					$(window).on("resize", function () {
						console.log("리사이즈 됨?");
						updateProgressBarPosition($this);
					});
				});

				function updateProgressBarWithDate() {
					// progress_bar_ty1에 대해 각 요소 선택
					$(".progress_bar_ty1_date").each(function () {
						var $progressBar = $(this);

						// 시작일과 종료일을 data 속성으로부터 가져오기
						var startDate = $progressBar.find("[data-pbcsdate]").data("pbcsdate");
						var endDate = $progressBar.find("[data-pbcedate]").data("pbcedate");

						// 날짜 형식: 'YYYY.MM.DD' → Date 객체로 변환
						var start = new Date(startDate.replace(/\./g, "/"));
						var end = new Date(endDate.replace(/\./g, "/"));
						var now = new Date(); // 현재 날짜

						// 전체 기간 계산 (밀리초 단위)
						var totalTime = end - start;
						// 현재 진행 시간 계산 (밀리초 단위)
						var currentTime = now - start;

						// 진행률 계산 (소수점 없이)
						var percent = Math.floor((currentTime / totalTime) * 100);

						// D-XX 형식으로 남은 일수 계산
						var remainingDays = Math.ceil((end - now) / (1000 * 60 * 60 * 24));

						// 'D-XX' 형식으로 .text에 삽입
						$progressBar.find(".per_bar_dp .text").text("D-" + remainingDays);

						// 접근성 관련 문구 생성 후 삽입
						$progressBar.attr("aria-label", "만기일 (" + endDate + ") 만기 " + remainingDays + "일 전");

						// 전체 넓이
						var $progressBarPer = $progressBar.find(".progress_bar_per");
						var progressBarPerWidth = $progressBarPer.outerWidth(); // 기준 넓이(px)

						// 진행률을 px로 환산
						var pixelWidth = Math.floor((percent / 100) * progressBarPerWidth);

						var $perBar = $progressBar.find(".per_bar");
						var $perBarDp = $perBar.find(".per_bar_dp");
						var perBarDpWidth = $perBarDp.outerWidth();

						// 초기 클래스 제거
						$perBar.removeClass("pos");
						$perBarDp.removeClass("poe");

						// 앞에 고정하기
						if (pixelWidth < perBarDpWidth / 2) {
							console.log("앞에 처박기");
							$perBar.addClass("pos");
						}

						// 끝으로 보내기
						if (progressBarPerWidth - pixelWidth < perBarDpWidth / 2) {
							console.log("끝으로 보내기");
							$perBar.addClass("poe");
						}

						// 진행률에 따른 per_bar 너비 설정
						setTimeout(function () {
							$perBar.addClass("active").css("width", percent + "%");
						}, 100);
					});
				}

				$(window).on("load", function () {
					updateProgressBarWithDate();
				});

				// 리사이즈 시에도 적용
				$(window).on("resize", function () {
					updateProgressBarWithDate();
				});
			});
		</script>
	</body>
</html>
