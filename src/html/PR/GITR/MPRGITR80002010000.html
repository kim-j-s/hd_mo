{{#> layout/default page-title="해외여행보험 | 상품"}}

<!-- s: Bottom 팝업 -->
{{#> popup/popup_bottom popup-id="pop_type01" popup-title="여행기간 선택" popup-active=true }}
<div class="popup_cont">
  <div class="date_select_area">

    <!-- s: 25-05-15 수정 -->
    <!-- <div class="calendar_range_dp" aria-hidden="true">
      <span class="drd_day">일</span>
      <span class="drd_day">월</span>
      <span class="drd_day">화</span>
      <span class="drd_day">수</span>
      <span class="drd_day">목</span>
      <span class="drd_day">금</span>
      <span class="drd_day">토</span>
    </div> -->
		<!-- e: 25-05-15 수정 -->
		 
    <div class="calendar_range">
      <div class="calendar_range_inner">
        <div class="calendar_range_item">
          <div class="calendar_cont">
            <strong class="yymm">
              <span class="yy">2025</span>년
              <span class="mm">04</span>월
            </strong>
            
            <div class="calendar_tbl">
              <table>
                <caption class="blind">달력</caption>
                <thead>
                  <tr>
                    <th scope="col">일</th>
                    <th scope="col">월</th>
                    <th scope="col">화</th>
                    <th scope="col">수</th>
                    <th scope="col">목</th>
                    <th scope="col">금</th>
                    <th scope="col">토</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><button type="button" class="day_default" disabled><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">31</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">3</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">4</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">5</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">6</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">7</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">8</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">9</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">10</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">11</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">12</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">13</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">14</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">15</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">16</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">17</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">18</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">19</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">20</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">21</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">22</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">23</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">24</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">25</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">26</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">28</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">3</span></button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="calendar_range_item">
          <div class="calendar_cont">
            <strong class="yymm">
              <span class="yy">2025</span>년
              <span class="mm">05</span>월
            </strong>            
            <div class="calendar_tbl">
              <table>
                <caption class="blind">달력</caption>
                <thead>
                  <tr>
                    <th scope="col">일</th>
                    <th scope="col">월</th>
                    <th scope="col">화</th>
                    <th scope="col">수</th>
                    <th scope="col">목</th>
                    <th scope="col">금</th>
                    <th scope="col">토</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><button type="button" class="day_default" disabled><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">28</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">3</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">4</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">5</span></button></td>
                    <td><button type="button" class="day_default day_today"><span class="text">6</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">7</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">8</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">9</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">10</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">11</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">12</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">13</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">14</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">15</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">16</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">17</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">18</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">19</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">20</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">21</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">22</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">23</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">24</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">25</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">26</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">28</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">31</span></button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="calendar_range_item">
          <div class="calendar_cont">
            <strong class="yymm">
              <span class="yy">2025</span>년
              <span class="mm">06</span>월
            </strong>            
            <div class="calendar_tbl">
              <table>
                <caption class="blind">달력</caption>
                <thead>
                  <tr>
                    <th scope="col">일</th>
                    <th scope="col">월</th>
                    <th scope="col">화</th>
                    <th scope="col">수</th>
                    <th scope="col">목</th>
                    <th scope="col">금</th>
                    <th scope="col">토</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">3</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">4</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">5</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">6</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">7</span></button></td>
                  </tr>
                  <tr>
                    
                    <td><button type="button" class="day_default"><span class="text">8</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">9</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">10</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">11</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">12</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">13</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">14</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">15</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">16</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">17</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">18</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">19</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">20</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">21</span></button></td>
                  </tr>
                  <tr>
                    
                    <td><button type="button" class="day_default"><span class="text">22</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">23</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">24</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">25</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">26</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">28</span></button></td>
                  </tr>
                  <tr>                    
                    <td><button type="button" class="day_default"><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">3</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">4</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">5</span></button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="dsa_bottom">
      <div class="dsa_date">2025.03.12~2025.03.21(9박 10일)</div>
      <div class="form_group_wrap">
        <div class="row">
          <div class="form_line grow">
            <div class="label_tit">출발시간</div>
            {{> cp/selectitem si_ph="시간 선택" si_title="출발시간 팝업 오픈" si_popup="pop1"}}
          </div>
          <div class="form_line grow">
            <div class="label_tit">도착시간</div>
            {{> cp/selectitem si_ph="시간 선택" si_title="도착시간 팝업 오픈" si_popup="pop2"}}
          </div>
        </div>
      </div>
    </div>


  </div>
</div>
<div class="popup_bottom">
  <div class="btn_area">
    {{> cp/button type="1" size="2" b-text="출발시간을 선택 중이에요" disabled=true }}
  </div>
</div>
{{/ popup/popup_bottom}}
<!-- e: Bottom 팝업 -->


<!-- s: 출발시간 선택 -->
{{#> popup/popup_bottom popup-id="pop1" popup-title="출발시간 선택" }}
<div class="popup_cont">
  <div class="popup_content">
    <div class="opt_select_list opt_case3">
      <div role="button" tabindex="0" class="option"><span class="text">오전 0시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 1시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 2시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 3시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 4시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 5시</span></div>
    </div>
  </div>
</div>
<div class="popup_bottom">
  <div class="btn_area">
    {{> cp/button type="1" size="2" b-text="확인" }}
  </div>
</div>
{{/ popup/popup_bottom}}
<!-- e: 출발시간 선택 -->

<!-- s: 도착시간 선택 -->
{{#> popup/popup_bottom popup-id="pop2" popup-title="도착시간 선택" }}
<div class="popup_cont">
  <div class="popup_content">
    <div class="opt_select_list opt_case3">
      <div role="button" tabindex="0" class="option"><span class="text">오전 0시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 1시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 2시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 3시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 4시</span></div>
      <div role="button" tabindex="0" class="option"><span class="text">오전 5시</span></div>
    </div>
  </div>
</div>
<div class="popup_bottom">
  <div class="btn_area">
    {{> cp/button type="1" size="2" b-text="확인" }}
  </div>
</div>
{{/ popup/popup_bottom}}
<!-- e: 도착시간 선택 -->



<script>

$(document).ready(function() {
  let startDayIndex = null;  // 현재 선택된 start_day 인덱스
  let endDayIndex = null;    // 현재 선택된 end_day 인덱스

  $('.calendar_range_item').each(function(itemIndex) {
    var calendarRangeItem = $(this);

    // 날짜 클릭 이벤트
    calendarRangeItem.find('tbody button.day_default:not([disabled])').on('click', function() {
      var clickedTd = $(this).closest('td');
      var clickedTr = clickedTd.closest('tr');
      var clickedTdIndex = clickedTd.index();
      var clickedTrIndex = clickedTr.index();
      var clickedItemIndex = itemIndex; // calendar_range_item의 인덱스
      var finalIndex = (clickedItemIndex + 1) * 100 + (clickedTrIndex + 1) * 10 + (clickedTdIndex + 1); // 최종 인덱스 계산

      // 최초 클릭이 아니면 start_day와 end_day 상태 처리
      if (startDayIndex === null) {
        // 첫 번째 클릭: start_day 부여
        $(this).addClass('day_active start_day');
        startDayIndex = finalIndex; // 첫 번째 클릭된 인덱스를 start_day로 설정
      } else {
        if ($(this).hasClass('start_day')) {
          // 이미 start_day가 부여된 버튼 클릭시 아무 동작 하지 않음
          return;
        }

        if (endDayIndex === null) {
          if (finalIndex > startDayIndex) {
            // end_day 부여
            $(this).addClass('day_active end_day');

            $('.start_day').addClass('start_day_fix');
            $('.end_day').addClass('end_day_fix');


            endDayIndex = finalIndex; // end_day 인덱스 설정

            // start_day와 end_day가 모두 설정된 후, 해당 범위의 버튼에 'between' 클래스를 부여
            markInProgressRange(startDayIndex, endDayIndex);
          } else if (finalIndex < startDayIndex) {
            // start_day가 더 큰 값이어야 하므로 start_day 변경
            $('.start_day').removeClass('day_active start_day');
            $(this).addClass('day_active start_day');
            startDayIndex = finalIndex; // 새로운 start_day 설정
            endDayIndex = null; // 이전의 end_day를 초기화
            $('.between').removeClass('between'); // 이전의 'between' 클래스 초기화
          }
        } else {
          // start_day와 end_day가 모두 설정된 후에는 새로 클릭된 날짜가 start_day로 설정됨
          // 기존의 start_day, end_day 상태 초기화
          $('.start_day').removeClass('day_active start_day');
          $('.end_day').removeClass('day_active end_day');
          $('.between').removeClass('between'); // 'between' 클래스 초기화
          $('.start_day_fix').removeClass('start_day_fix');
          $('.end_day_fix').removeClass('end_day_fix');
          

          // 새로 클릭된 날짜를 start_day로 설정
          $(this).addClass('day_active start_day');
          startDayIndex = finalIndex; // 새로운 start_day 설정
          endDayIndex = null; // 이전의 end_day를 초기화
        }
      }
    });
  });

  // start_day와 end_day 사이의 범위에 'ing' 클래스 부여
  function markInProgressRange(startIndex, endIndex) {
    $('.calendar_range_item').each(function(itemIndex) {
      var calendarRangeItem = $(this);

      // 각 td 요소 순회
      calendarRangeItem.find('tbody td').each(function() {
        var td = $(this);
        // var tdButton = td.find('button.day_default:not([disabled])');
        var tdButton = td.find('button.day_default');
        if (tdButton.length > 0) {
          var tdIndex = td.index();
          var trIndex = td.closest('tr').index();
          var finalIndex = (itemIndex + 1) * 100 + (trIndex + 1) * 10 + (tdIndex + 1); // 각 날짜의 인덱스 계산

          // 선택된 범위 내의 버튼에 'ing' 클래스 부여
          if (finalIndex > startIndex && finalIndex < endIndex) {
            tdButton.addClass('between');
          }
        }
      });
    });
  }
});










</script>



{{/ layout/default }}