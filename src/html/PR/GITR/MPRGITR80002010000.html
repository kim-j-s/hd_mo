{{#> layout/default page-title="해외여행보험 | 상품"}}

<!-- s: Bottom 팝업 -->
{{#> popup/popup_bottom popup-id="pop_type01" popup-title="여행기간 선택" popup-active=true }}
<div class="popup_cont">
	<div class="popup_content">

    <div class="calendar_range">
      <div class="calendar_range_dp" aria-hidden="true">
        <span class="drd_day">일</span>
        <span class="drd_day">월</span>
        <span class="drd_day">화</span>
        <span class="drd_day">수</span>
        <span class="drd_day">목</span>
        <span class="drd_day">금</span>
        <span class="drd_day">토</span>
      </div>
      <div class="calendar_range_inner">
        <div class="calendar_range_item">
          <div class="calendar_cont">
            <strong class="yymm">
              <span class="yy">2025</span>년
              <span class="mm">04</span>월
            </strong>
            
            <div class="calendar_tbl">
              <table>
                <caption class="blind">달력</caption>
                <thead>
                  <tr>
                    <th scope="col">일</th>
                    <th scope="col">월</th>
                    <th scope="col">화</th>
                    <th scope="col">수</th>
                    <th scope="col">목</th>
                    <th scope="col">금</th>
                    <th scope="col">토</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><button type="button" class="day_default" disabled><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">31</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">3</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">4</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">5</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">6</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">7</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">8</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">9</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">10</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">11</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">12</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">13</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">14</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">15</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">16</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">17</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">18</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">19</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">20</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">21</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">22</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">23</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">24</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">25</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">26</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">28</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">3</span></button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="calendar_range_item">
          <div class="calendar_cont">
            <strong class="yymm">
              <span class="yy">2025</span>년
              <span class="mm">05</span>월
            </strong>            
            <div class="calendar_tbl">
              <table>
                <caption class="blind">달력</caption>
                <thead>
                  <tr>
                    <th scope="col">일</th>
                    <th scope="col">월</th>
                    <th scope="col">화</th>
                    <th scope="col">수</th>
                    <th scope="col">목</th>
                    <th scope="col">금</th>
                    <th scope="col">토</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><button type="button" class="day_default" disabled><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">28</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default" disabled><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">1</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">2</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">3</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">4</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">5</span></button></td>
                    <td><button type="button" class="day_default day_today"><span class="text">6</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">7</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">8</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">9</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">10</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">11</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">12</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">13</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">14</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">15</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">16</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">17</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">18</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">19</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">20</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">21</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">22</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">23</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">24</span></button></td>
                  </tr>
                  <tr>
                    <td><button type="button" class="day_default"><span class="text">25</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">26</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">27</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">28</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">29</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">30</span></button></td>
                    <td><button type="button" class="day_default"><span class="text">31</span></button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
	</div>
</div>
<div class="popup_bottom">
  <div class="btn_area">
    {{> cp/button type="1" size="2" b-text="출발시간을 선택 중이에요" disabled=true }}
  </div>
</div>
{{/ popup/popup_bottom}}
<!-- e: Bottom 팝업 -->



<script>

$(document).ready(function() {
    let startButton = null; // 시작 날짜 버튼
    let endButton = null;   // 종료 날짜 버튼

    // 버튼 클릭 이벤트
    $('button.day_default').on('click', function() {
        // 현재 클릭된 버튼
        const clickedButton = $(this);

        // 이미 선택된 시작 날짜가 있고, 이번에 클릭된 날짜가 시작 날짜보다 이전 날짜라면 초기화
        if (startButton && !endButton) {
            // 선택된 날짜가 이전에 클릭된 startButton보다 이전이면 초기화
            const clickedDate = parseInt(clickedButton.text().trim());
            const startDate = parseInt(startButton.text().trim());

            if (clickedDate < startDate) {
                // 초기화
                resetSelection();
                startButton = clickedButton; // 클릭된 버튼을 새로운 시작일로 설정
                startButton.addClass('day_active day_start'); // 새로운 시작일에 클래스 추가
            } else {
                // 두 번째 클릭된 날짜는 종료일로 설정
                endButton = clickedButton;
                endButton.addClass('day_active day_end'); // 종료일에 클래스 추가

                // 시작일과 종료일 사이에 'ing' 클래스 추가
                markRange();
            }
        } else if (!startButton) {
            // 첫 번째 클릭은 시작일로 설정
            startButton = clickedButton;
            startButton.addClass('day_active day_start'); // 시작일에 클래스 추가
        }
    });

    // 범위 내 날짜에 ing 클래스 추가
    function markRange() {
        if (!startButton || !endButton) return;

        const startIndex = getIndex(startButton);
        const endIndex = getIndex(endButton);

        // 선택된 날짜 범위가 시작일과 종료일 사이인지 확인하고, 그 사이의 td에 ing 클래스 추가
        let rangeStart = Math.min(startIndex, endIndex);
        let rangeEnd = Math.max(startIndex, endIndex);

        // 선택된 날짜 영역 내 버튼에 'ing' 클래스 추가
        $('button.day_default').each(function() {
            const currentButton = $(this);
            const currentIndex = getIndex(currentButton);

            // 범위 내 날짜에 ing 클래스 부여
            if (currentIndex > rangeStart && currentIndex < rangeEnd) {
                currentButton.addClass('ing'); // 범위 내 날짜에 ing 클래스 추가
            }
        });
    }

    // 날짜 버튼의 index 값을 구하는 함수
    function getIndex(button) {
        const text = button.text().trim();
        const parentTr = button.closest('tr');
        const buttonsInRow = parentTr.find('button.day_default');

        // 해당 버튼이 속한 tr에서 버튼의 인덱스 값을 반환
        return buttonsInRow.index(button);
    }

    // 선택 초기화
    function resetSelection() {
        // 기존의 'day_active'와 'ing' 클래스를 초기화
        $('button').removeClass('day_active day_start day_end ing');
        startButton = null;
        endButton = null;
    }
});


</script>



{{/ layout/default }}